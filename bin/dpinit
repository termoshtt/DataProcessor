#!/usr/bin/env python
# coding=utf-8

import os.path
import sys
import argparse

sys.path = ([sys.path[0]]
            + [os.path.join(os.path.dirname(__file__), "../lib")]
            + sys.path[1:])
import dataprocessor as dp
sys.path = [sys.path[0]] + sys.path[2:]


def main(args):
    if args.rcpath:
        dp.rc.create_configure_file(args.rcpath)
    else:
        dp.rc.create_configure_file()


def parse():
    parser = argparse.ArgumentParser()
    parser.add_argument("--rcpath", help="path of configure file")
    parser.add_argument("--debug", help="output traceback")
    return parser.parse_args()

if __name__ == '__main__':
    args = parse()
    try:
        main(args)
    except dp.exception.DataProcessorError as e:
        if args.debug:
            print(traceback.format_exc())
        print("=*= ERROR =*=")
        print("Message: %s" % e.msg)
        sys.exit(1)
